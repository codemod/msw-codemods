var u=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var m=Object.prototype.hasOwnProperty;var h=(t,e)=>{for(var i in e)u(t,i,{get:e[i],enumerable:!0})},x=(t,e,i,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of p(e))!m.call(t,n)&&n!==i&&u(t,n,{get:()=>e[n],enumerable:!(r=g(e,n))||r.enumerable});return t};var D=t=>x(u({},"__esModule",{value:!0}),t);var O={};h(O,{handleSourceFile:()=>F});module.exports=D(O);var o=require("ts-morph");function C(t,e,i){let r=t.getImportDeclaration(e)??t.addImportDeclaration({moduleSpecifier:e});return r.getNamedImports().find(a=>a.getName()===i)??r.addNamedImport({name:i})}function f(t,e,i){let r=t.getImportDeclaration(e);if(!r)return null;let n=r.getNamedImports().find(a=>a.getName()===i);return n?n.getAliasNode()?.getText()||n.getName():null}function I(t){let e=t.getChildrenOfKind(o.SyntaxKind.Identifier),[i,r]=e;!i||!r||e.length===2&&r.findReferencesAsNodes().forEach(n=>n.replaceWithText(i.getText()))}function T(t,e,i){let r=!1;return t.getDescendantsOfKind(o.SyntaxKind.PropertyAccessExpression).forEach(n=>{if(e.includes(n.getName())&&n.getChildrenOfKind(o.SyntaxKind.Identifier)[0]?.getText()===i){let a=n.getChildrenOfKind(o.SyntaxKind.Identifier).at(-1)?.getText();if(!a)throw new Error("Could not find accessed identifier");r=!0,n.replaceWithText(a)}}),t.getDescendantsOfKind(o.SyntaxKind.ObjectBindingPattern).forEach(n=>{let a=[];n.getDescendantsOfKind(o.SyntaxKind.BindingElement).forEach(s=>{s.getDescendantsOfKind(o.SyntaxKind.Identifier).find(c=>e.includes(c.getText()))&&(I(s),a.push(s.getText()))}),a.length&&(r=!0,n?.replaceWithText(n.getText().replace(new RegExp(`(,\\s*)?(${a.join("|")})+(\\s*,)?`,"g"),(s,l,c,d)=>s&&![l,d].includes(s)?"":s)),n.getDescendantsOfKind(o.SyntaxKind.Identifier).length?n.formatText():n.getAncestors().find(s=>s.getKind()===o.SyntaxKind.VariableDeclaration)?.asKindOrThrow(o.SyntaxKind.VariableDeclaration).remove())}),r}function K(t,e){let i=f(t,"msw","http"),r=f(t,"msw","graphql"),n=e.getChildrenOfKind(o.SyntaxKind.PropertyAccessExpression).at(0)?.getChildrenOfKind(o.SyntaxKind.Identifier)??[],a=n.at(0);if(!a)return!1;let l=(n.at(1)??a).getText(),c=a.getText()===i&&["all","get","post","put","patch","delete","head","options"].includes(l),d=a.getText()===r&&["query","mutation"].includes(l);return c||d}function y(t){let e=t.getArguments().at(1)??null;if(e===null)return null;let i=e.getChildrenOfKind(o.SyntaxKind.Parameter),r=e.asKind(o.SyntaxKind.ArrowFunction)??e.asKind(o.SyntaxKind.FunctionExpression)??null;return r===null?null:[e.getChildrenOfKind(o.SyntaxKind.Block).at(0)??r,i,r]}function E(t){return t.getImportDeclarations().find(e=>e.getModuleSpecifier().getLiteralText().startsWith("msw"))!==void 0}function F(t){if(E(t))return t.getDescendantsOfKind(o.SyntaxKind.CallExpression).filter(e=>K(t,e)).forEach(e=>{let i=y(e);if(i===null)return;let[r,n]=i,[a]=n;T(r,["passthrough"],a?.getText())&&C(t,"msw","passthrough")}),t.getFullText()}0&&(module.exports={handleSourceFile});
