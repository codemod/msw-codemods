var u=Object.defineProperty;var C=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var F=Object.prototype.hasOwnProperty;var E=(t,e)=>{for(var r in e)u(t,r,{get:e[r],enumerable:!0})},b=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of y(e))!F.call(t,n)&&n!==r&&u(t,n,{get:()=>e[n],enumerable:!(i=C(e,n))||i.enumerable});return t};var k=t=>b(u({},"__esModule",{value:!0}),t);var T={};E(T,{handleSourceFile:()=>P});module.exports=k(T);var o=require("ts-morph");function x(t,e,r){let i=t.getImportDeclaration(e);if(!i)return null;let n=i.getNamedImports().find(a=>a.getName()===r);return n?n.getAliasNode()?.getText()??n.getName():null}function A(t,e){let r=x(t,"msw","http"),i=x(t,"msw","graphql"),n=e.getChildrenOfKind(o.SyntaxKind.PropertyAccessExpression).at(0)?.getChildrenOfKind(o.SyntaxKind.Identifier)??[],a=n.at(0);if(!a)return!1;let c=(n.at(1)??a).getText(),s=a.getText()===r&&["all","get","post","put","patch","delete","head","options"].includes(c),d=a.getText()===i&&["query","mutation"].includes(c);return s||d}function D(t){let e=t.getArguments().at(1)??null;if(e===null)return null;let r=e.getChildrenOfKind(o.SyntaxKind.Parameter),i=e.asKind(o.SyntaxKind.ArrowFunction)??e.asKind(o.SyntaxKind.FunctionExpression)??null;return i===null?null:[e.getChildrenOfKind(o.SyntaxKind.Block).at(0)??i,r,i]}function K(t){return t.getImportDeclarations().find(e=>e.getModuleSpecifier().getLiteralText().startsWith("msw"))!==void 0}function P(t){if(K(t))return t.getDescendantsOfKind(o.SyntaxKind.CallExpression).filter(e=>A(t,e)).forEach(e=>{let r=D(e);if(r===null)return;let[i,n,a]=r,[f]=n;(f?.findReferencesAsNodes()??[]).forEach(l=>{l.replaceWithText("request")});let s=a.getLastChildByKind(o.SyntaxKind.SyntaxList)??null,d=a.getChildrenOfKind(o.SyntaxKind.OpenParenToken).length>0;if(s===null)return;let p=["request","params","cookies"],g=[];i.getDescendantsOfKind(o.SyntaxKind.VariableDeclaration).forEach(l=>p.forEach(h=>{l.getFirstChildIfKind(o.SyntaxKind.Identifier)?.getText()===h&&g.push(h)}));let m=`{ ${p.filter(l=>!g.includes(l)).join(", ")} }`;s.replaceWithText(d?m:`(${m})`)}),t.fixUnusedIdentifiers(),t.getFullText()}0&&(module.exports={handleSourceFile});
